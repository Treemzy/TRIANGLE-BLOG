{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Treemzy\\\\Documents\\\\ReactApps\\\\ReactDjangoBlog\\\\project\\\\frontend\\\\src\\\\screens\\\\CommentsListScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { Link } from 'react-router-dom';\nimport { Table, Button, Row, Col, Image } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Loader from \"../components/Loader\";\nimport Message from \"../components/Message\";\nimport Paginate from \"../components/Paginate\";\nimport { deletePostComment, listComments } from \"../actions/postActions\";\nimport { POST_LIST_COMMENTS_RESET } from '../constants/postConstants';\nimport ConfirmationModal from '../components/ConfirmationModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CommentsListScreen() {\n  _s();\n\n  const history = useNavigate();\n  const location = useLocation();\n  const dispatch = useDispatch();\n  const [displayConfirmationModal, setDisplayConfirmationModal] = useState(false);\n  const [message, setMessage] = useState(null);\n  const [cid, setCid] = useState(null);\n  const postList = useSelector(state => state.postList);\n  const {\n    posts\n  } = postList;\n  const commentList = useSelector(state => state.commentList);\n  const {\n    error,\n    loading,\n    comments\n  } = commentList;\n  const postCommentDelete = useSelector(state => state.postCommentDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete\n  } = postCommentDelete;\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n  useEffect(() => {\n    dispatch({\n      type: POST_LIST_COMMENTS_RESET\n    });\n\n    if (!userInfo.isAdmin) {\n      history(\"/login\");\n    } else {\n      dispatch(listComments());\n    }\n  }, [dispatch, history, userInfo, successDelete]);\n\n  const showDeleteModal = cid => {\n    setCid(cid);\n    setMessage(`Are you sure you want to delete this comment '${comments.find(x => x._id === cid).comment}' ? `);\n    setDisplayConfirmationModal(true);\n  };\n\n  const hideConfirmationModal = () => {\n    setDisplayConfirmationModal(false);\n  };\n\n  const deleteHandler = cid => {\n    dispatch(deletePostComment(cid));\n    setDisplayConfirmationModal(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-md-center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this) : error ? /*#__PURE__*/_jsxDEV(Message, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      responsive: true,\n      className: \"table-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"POST\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"USER\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"COMMENT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"ACTIONS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: comments.map(comment => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: [comment.post, \" \", posts.find(x => x._id === comment.post).title]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: comment.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: comment.comment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [/*#__PURE__*/_jsxDEV(LinkContainer, {\n              to: `/admin/comment/${comment._id}/edit`,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: \"btn-sm\",\n                variant: \"light\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"btn-sm\",\n              variant: \"danger\",\n              onClick: () => showDeleteModal(comment._id),\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-trash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 21\n          }, this)]\n        }, comment._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 19\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmationModal, {\n      variantBtnDel: \"danger\",\n      ModalTitle: \"Confirmation\",\n      showModal: displayConfirmationModal,\n      confirmModal: deleteHandler,\n      hideModal: hideConfirmationModal,\n      cid: cid,\n      message: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CommentsListScreen, \"pBxiqnRI50dGEG/haUFJKW2CSPQ=\", false, function () {\n  return [useNavigate, useLocation, useDispatch, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = CommentsListScreen;\nexport default CommentsListScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommentsListScreen\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","LinkContainer","Link","Table","Button","Row","Col","Image","useDispatch","useSelector","Loader","Message","Paginate","deletePostComment","listComments","POST_LIST_COMMENTS_RESET","ConfirmationModal","CommentsListScreen","history","location","dispatch","displayConfirmationModal","setDisplayConfirmationModal","message","setMessage","cid","setCid","postList","state","posts","commentList","error","loading","comments","postCommentDelete","loadingDelete","errorDelete","success","successDelete","userLogin","userInfo","type","isAdmin","showDeleteModal","find","x","_id","comment","hideConfirmationModal","deleteHandler","map","post","title","user"],"sources":["C:/Users/Treemzy/Documents/ReactApps/ReactDjangoBlog/project/frontend/src/screens/CommentsListScreen.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { Link } from 'react-router-dom'\r\nimport { Table, Button, Row, Col, Image } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Loader from \"../components/Loader\";\r\nimport Message from \"../components/Message\";\r\nimport Paginate from \"../components/Paginate\";\r\nimport {  deletePostComment, listComments } from \"../actions/postActions\";\r\nimport { POST_LIST_COMMENTS_RESET } from '../constants/postConstants'\r\nimport ConfirmationModal from '../components/ConfirmationModal'\r\n\r\nfunction CommentsListScreen() {\r\n    const history = useNavigate();\r\n    const location = useLocation();\r\n    const dispatch = useDispatch();\r\n\r\n    const [displayConfirmationModal, setDisplayConfirmationModal] = useState(false);\r\n    const [message, setMessage] = useState(null);\r\n    const [cid, setCid] = useState(null);\r\n\r\n    const postList = useSelector((state) => state.postList);\r\n    const { posts } = postList;\r\n\r\n    const commentList = useSelector((state) => state.commentList);\r\n    const { error, loading, comments } = commentList;\r\n\r\n    const postCommentDelete = useSelector((state) => state.postCommentDelete);\r\n    const {\r\n      loading: loadingDelete,\r\n      error: errorDelete,\r\n      success: successDelete,\r\n    } = postCommentDelete;\r\n\r\n    const userLogin = useSelector((state) => state.userLogin);\r\n    const { userInfo } = userLogin;\r\n\r\n    useEffect(() => {\r\n        dispatch({type: POST_LIST_COMMENTS_RESET})\r\n    \r\n        if(!userInfo.isAdmin){\r\n          history(\"/login\")\r\n        }else{\r\n          dispatch(listComments());\r\n        }\r\n      }, [dispatch, history, userInfo, successDelete]);\r\n\r\n    const showDeleteModal = (cid) => {\r\n        setCid(cid);\r\n        setMessage(`Are you sure you want to delete this comment '${comments.find((x) => x._id === cid).comment}' ? `);        \r\n        setDisplayConfirmationModal(true)\r\n    };\r\n\r\n    const hideConfirmationModal = () => {\r\n        setDisplayConfirmationModal(false);\r\n        \r\n    }\r\n\r\n    const deleteHandler = (cid) => {       \r\n        dispatch(deletePostComment(cid));\r\n        setDisplayConfirmationModal(false);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Row className=\"justify-content-md-center\">\r\n              <Col>\r\n                <h1>Category</h1>\r\n              </Col>\r\n             \r\n            </Row>\r\n          {loading ? (\r\n            <Loader />\r\n          ) : error ? (\r\n            <Message variant=\"danger\">{error}</Message>\r\n          ) : (\r\n            <Table striped bordered hover responsive className=\"table-sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th>POST</th>\r\n                  <th>USER</th>\r\n                  <th>COMMENT</th>\r\n                  <th>ACTIONS</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {comments.map((comment) => (\r\n                  <tr key={comment._id}>\r\n                    <td>{comment.post} {posts.find((x) => x._id === comment.post).title}</td>\r\n                    <td>{comment.user}</td>\r\n                    <td>{comment.comment}</td>\r\n                    <td>\r\n                      <LinkContainer to={`/admin/comment/${comment._id}/edit`}>\r\n                        <Button className=\"btn-sm\" variant=\"light\">\r\n                          <i className=\"fas fa-edit\"></i>\r\n                        </Button>\r\n                      </LinkContainer>\r\n                      <Button\r\n                        className=\"btn-sm\"\r\n                        variant=\"danger\"\r\n                        onClick={() => showDeleteModal(comment._id)}\r\n                      >\r\n                        <i className=\"fas fa-trash\"></i>\r\n                      </Button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </Table>\r\n          )}\r\n          <ConfirmationModal variantBtnDel={\"danger\"} ModalTitle={\"Confirmation\"} showModal={displayConfirmationModal} confirmModal={deleteHandler} hideModal={hideConfirmationModal}  cid={cid} message={message}  />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CommentsListScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}